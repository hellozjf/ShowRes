<!DOCTYPE html>
<html>
<head>
<title>index.html</title>

<meta name="keywords" content="keyword1,keyword2,keyword3">
<meta name="description" content="this is my page">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">

<!--<link rel="stylesheet" type="text/css" href="./styles.css">-->

</head>

<body>
	<button id="renew">Renew</button>
	<div id="main" style="height: 400px;"></div>
</body>
<script type="text/javascript" src="jquery.min.js"></script>
<script type="text/javascript" src="echarts-all.js"></script>
<script>
	/* var fso = new ActiveXObject("Scripting.FileSystemObject");
	var f = fso.OpenTextFile("res.txt", 1, true);
	while(!f.AtEndOfStream) {
		console.log(f.ReadLine);
	}
	f.close(); */
	/*$.get("/res.txt", function (data, textStauts) {
	    var result=data;
	    console.log(result);
	});*/

	function renew() {
		// 		alert('renew');
		$.ajax({
			type : "POST",
			url : "getRes.do",// baseURL
			data : {},
			dataType : "json",
			success : function(ret) {
				option.xAxis[0].data = ret.xdata;
				option.series[0].data = ret.ydata;
				myChart.setOption(option);
			},
			error : function(XMLHttpRequest, textStatus, errorThrown) {
				alert(textStatus + errorThrown);
				return false;
			}
		});
	}

	$('#renew').click(function() {
		renew();
	})
	$(renew);
</script>
<script>
	var myChart = echarts.init(document.getElementById('main'));
	var option = {
		color : [ '#3398DB' ],
		title : {
			text : '百度搜索排名前20个'
		},
		tooltip : {
			trigger : 'axis',
			axisPointer : { // 坐标轴指示器，坐标轴触发有效
				type : 'shadow' // 默认为直线，可选为：'line' | 'shadow'
			}
		},
		grid : {
			left : '3%',
			right : '4%',
			bottom : '3%',
			containLabel : true
		},
		xAxis : [ {
			type : 'category',
			data : [ '1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月' ],
			axisLabel : {
				interval : 0,
				rotate : 45
			},
			axisTick : {
				alignWithLabel : true
			}
		} ],
		yAxis : [ {
			type : 'value'
		} ],
		series : [ {
			name : '搜索量',
			type : 'bar',
			data : [ 2.0, 4.9, 7.0, 23.2, 25.6, 76.7, 135.6, 162.2, 32.6, 20.0, 6.4, 3.3 ]
		}, ]
	};

	myChart.setOption(option);
</script>
</html>
